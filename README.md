# 🏆 Mission 4

## 🌟 미션 목표

- 토큰 기반 유저 인증/인가 구현하기
- (심화) Refresh Token 구현하기
- (심화) Prisma로 관계형 활용하기

## 🛠️ 기술 스택 (Tech Stack)

- **Backend Framework:** Node.js, Express
- **Database & ORM:** PostgreSQL, Prisma
- **Authentication:** JWT, bcrypt (비밀번호 암호화)
- **Tool:** Postman

### 📚 Mission 4 최종 파일 구조 (Service-Controller-Router 패턴)

<img width="362" height="599" alt="스크린샷 2025-11-27 오후 5 07 47" src="https://github.com/user-attachments/assets/0eedbf99-cabf-4c5c-adec-287429997d5a" />

## ❗️기본 요구사항

- [x] 스프린트 미션 3의 구현이 완료된 상태에서 진행을 권장합니다.
- [x] 가능하다면 Prisma 스키마를 수정할 때 Prisma 마이그레이션을 함께 진행해 보고, 잘되지 않는다면 마이그레이션 파일과 데이터베이스를 초기화하고 진행해도 좋습니다.

### 인증

- [x] User 스키마를 작성해 주세요.
  - [x] id, email, nickname, image, password, createdAt, updatedAt 필드를 가집니다.
- [x] 회원가입 API를 만들어 주세요.
  - [x] email, nickname, password 를 입력하여 회원가입을 진행합니다.
  - [x] password는 해싱해 저장합니다.
- [x] 토큰 기반 인증: 로그인에 성공하면 Access Token을 발급하는 기능을 구현합니다.

### 상품 기능 인가

- [x] 로그인한 유저만 상품을 등록할 수 있습니다.
- [x] 상품을 등록한 유저만 해당 상품의 정보를 수정하거나 삭제할 수 있습니다.

### 게시글 기능 인가

- [x] 로그인한 유저만 게시글을 등록할 수 있습니다.
- [x] 게시글을 등록한 유저만 해당 게시글을 수정하거나 삭제할 수 있습니다.

### 댓글 기능 인가

- [x] 로그인한 유저만 상품에 댓글을 등록할 수 있습니다.
- [x] 로그인한 유저만 게시글에 댓글을 등록할 수 있습니다.
- [x] 댓글을 등록한 유저만 해당 댓글을 수정하거나 삭제할 수 있습니다.

### 유저 정보

- [x] 유저가 자신의 정보를 조회하는 기능을 구현합니다.
- [x] 유저가 자신의 정보를 수정할 수 있는 기능을 구현합니다.
- [x] 유저가 자신의 비밀번호를 변경할 수 있는 기능을 구현합니다.
- [x] 유저가 자신이 등록한 상품의 목록을 조회하는 기능을 구현합니다.
- [x] 유저의 비밀번호는 리스폰스로 노출하지 않습니다.

## ❗️심화 요구사항

### 인증

- [x] 토큰 기반 인증: Refresh Token으로 토큰을 갱신하는 기능을 구현합니다.

### 좋아요 기능

- [x] 로그인한 유저는 상품에 '좋아요'와 '좋아요 취소'를 할 수 있습니다.
- [x] 로그인한 유저는 게시글에 '좋아요'와 '좋아요 취소'를 할 수 있습니다.
- [x] 상품 또는 게시글을 조회할 때, 유저가 '좋아요'를 누른 항목인지 확인할 수 있도록 isLiked와 같은 불린형 필드를 리스폰스 객체에 포함시켜 리스폰스해 주세요.
- [x] 유저가 '좋아요'를 표시한 상품의 목록을 조회하는 기능을 구현합니다.

## 📷 스크린샷

### ERD

<img width="716" height="632" alt="스크린샷 2025-11-27 오후 4 48 30" src="https://github.com/user-attachments/assets/c4e664f5-c8ae-4b49-89f3-d43ddd3b95be" />

## 😭 멘토에게

- 좋아요 넣는 부분이 문서랑 AI 도움 받아도 이해하기 어렵습니다..
